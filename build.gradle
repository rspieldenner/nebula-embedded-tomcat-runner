allprojects {
    apply plugin: 'idea'
}

subprojects {
    apply plugin: 'groovy'
    
    repositories {
        mavenCentral()
    }

    dependencies {
        compile gradleApi()
        testCompile('com.netflix.nebula:nebula-test:2.2.1') {
            exclude group: 'org.codehaus.groovy'
        }
    }
}

apply plugin: 'base'

group = 'nebula.tomcat.embedded'
version = '0.1'

task uberJar(type: Jar, dependsOn: subprojects.assemble) {
    description = 'Creates Uberjar.'

    subprojects.each { project ->
        from project.configurations.archives.allArtifacts.files.collect { zipTree(it) }
    }

    manifest {
        attributes 'Main-Class': 'nebula.tomcat.tomcat7x.TomcatRunner'
    }
}